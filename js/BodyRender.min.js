class BodyRenderer{constructor(bodySize){this.bodySize=bodySize,this.starPos=[],this.initStarPositions(),this.ringDiameter,this.ringWidth,this.moonSize,this.planetSize,this.lo_history=[],this.mid_history=[],this.hi_history=[]}setBodySize(bodySize){this.bodySize=bodySize,this.ringDiameter=70*this.bodySize,this.ringWidth=3*this.bodySize,this.moonSize=.07*this.bodySize,this.planetSize=.66*this.bodySize}initStarPositions(){for(let i=0;i<150;i++){let theta=random(180),phi=random(360),pos=createVector(2e3*sin(theta)*cos(phi),2e3*cos(theta),2e3*sin(theta)*sin(phi)),brightness=random(50,100),size=random(1,3);this.starPos.push([pos,brightness,size])}}renderBody(){this.lo_history.push(lo),this.mid_history.push(mid),this.hi_history.push(hi),push(),specularMaterial(60,100,50),shininess(50),texture(body00),ambientLight(50),ambientLight(30,30,30),pointLight(255,255,255,200,200,200),directionalLight(255,255,0,-1,0,0),spotLight(255,255,255,-200,-200,400,0,0,-1,16,50),push(),scale(this.planetSize),rotateX(90),rotateZ(.6*-frameCount),noStroke(),model(model00),pop(),push(),strokeWeight(2),noFill();this.lo_history.length,this.ringDiameter;this.lo_history.length>360&&(this.lo_history.shift(),this.mid_history.shift(),this.hi_history.shift()),pop(),this.renderMoons(),pop()}renderMoons(){let t=45+millis()/1e5*360/TWO_PI;push();let x1=260*this.bodySize*cos(t),z1=260*this.bodySize*sin(t);translate(x1,0,z1),scale(this.moonSize),texture(body01),model(model01),pop(),push();let x2=260*this.bodySize*cos(t+180),z2=260*this.bodySize*sin(t+180);translate(x2,0,z2),scale(this.moonSize),texture(body01),model(model01),pop(),push();let x3=260*this.bodySize*cos(t+90),z3=260*this.bodySize*sin(t+90);translate(x3,0,z3),scale(this.moonSize),texture(body01),model(model01),pop(),push();let x4=260*this.bodySize*cos(t+270),z4=260*this.bodySize*sin(t+270);translate(x4,0,z4),scale(this.moonSize),texture(body01),model(model01),pop()}stars(){push(),noStroke();for(let i=0;i<this.starPos.length;i++){let pos=this.starPos[i][0],brightness=this.starPos[i][1],size=this.starPos[i][2],twinkle=brightness+sin(.001*millis()+i);push(),translate(pos.x,pos.y,pos.z),strokeWeight(size),stroke(twinkle),point(0,0,0),pop()}pop()}}